---
title: "Linuxä¸‹ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥"
date: "2017-06-25"
category: "dev"
emoji: "ğŸ¶"
---

### linuxä¸‹ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥



Linuxæ–‡ä»¶ç³»ç»Ÿç»™æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ä¸€ä¸ªç¼–å·ï¼Œæˆä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨Linuxç³»ç»Ÿä¸­å¯¹ä¸€ä¸ªæ–‡ä»¶åˆ›å»ºç´¢å¼•æ˜¯ç”¨`ln`å‘½ä»¤(link)ã€‚



![tldr-ln][1]



åˆ›å»ºçš„é“¾æ¥æ–‡ä»¶åˆ†ä¸ºä¸¤ç§ï¼Œç¡¬é“¾æ¥(hard link)å’Œè½¯é“¾æ¥(soft link or symbolic link)ã€‚

åœ¨Linuxä¸­ï¼Œå…è®¸å¤šä¸ªæ–‡ä»¶ååŒæ—¶ä»£è¡¨(æ³¨æ„è¿™é‡Œä¸æ˜¯æŒ‡å‘)åŒä¸€ç´¢å¼•èŠ‚ç‚¹ï¼Œå°±æ˜¯é€šè¿‡ç¡¬é“¾æ¥æ¥å®ç°ã€‚ç¡¬é“¾æ¥çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ–‡ä»¶åˆ›å»ºå¤šä¸ªæœ‰æ•ˆè·¯å¾„ï¼Œè¿™æ ·å¯¹é‡è¦çš„æ–‡ä»¶èµ·åˆ°äº†ä¿é™©ä½œç”¨ï¼Œé˜²æ­¢è¯¯åˆ ç­‰æ“ä½œã€‚å½“ä½ åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä»…ä»…åˆ é™¤äº†å®ƒçš„ä¸€ä¸ªç¡¬é“¾æ¥ï¼Œåªæœ‰å½“æ‰€æœ‰çš„linksè¢«åˆ é™¤è¿™ä¸ªinodeæ‰ä¼šè¢«ç§»é™¤æ‰ã€‚

è€Œè½¯é“¾æ¥çš„åˆ›å»ºï¼Œä»…ä»…å»ºé€ äº†ä¸€ä¸ªæŒ‡å‘æ”¹è·¯å¾„æ–‡ä»¶çš„linkï¼Œæ‰“å¼€è¿™ä¸ªlinkå…¶å®æ˜¯æ‰“å¼€äº†è¿™ä¸ªlinkä»£è¡¨çš„æºæ–‡ä»¶ï¼Œå°±åƒWindowsç³»ç»Ÿä¸‹çš„å¿«æ·æ–¹å¼ï¼Œå¦‚æœæºæ–‡ä»¶è·¯å¾„æ”¹å˜æˆ–è€…æºæ–‡ä»¶çš„åå­—æ”¹å˜å°†ä¼šå¯¼è‡´è¿™ä¸ªlinkæ‰“ä¸å¼€ã€‚



![linux-hardlink&softlink][2]

ä¸‹é¢åšäº†ä¸€ä¸ªæµ‹è¯•ï¼Œæ–°å»ºäº†ä¸€ä¸ª`abc.txt`æ–‡ä»¶ï¼Œå†…å®¹æ˜¯`this is source file`ã€‚

1. åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥aa, `ln abc.txt aa`
2. åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥bb, `ln -s abc.txt bb`
3. é€šè¿‡catå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹éƒ½æ˜¯ç›¸åŒçš„
4. ç§»é™¤æ‰`abc.txt`ï¼Œå†ç”¨catå‘½ä»¤æŸ¥çœ‹aaå’Œbb
5. è½¯é“¾æ¥bbå·²ç»æ²¡å†…å®¹äº†ï¼Œè€Œç¡¬é“¾æ¥aaä»ç„¶å­˜åœ¨



![ln-test][3]

[1]: https://raw.githubusercontent.com/FaiChou/faichou.github.io/master/img/qiniu/tldr-ln.png
[2]: https://raw.githubusercontent.com/FaiChou/faichou.github.io/master/img/qiniu/linux-hardlink&amp;softlink.png
[3]: https://raw.githubusercontent.com/FaiChou/faichou.github.io/master/img/qiniu/ln-test.png

