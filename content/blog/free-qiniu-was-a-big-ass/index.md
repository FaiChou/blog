---
title: "ä¸ƒç‰›å…è´¹ä¹‹å‘"
date: "2018-10-09"
category: "dev"
emoji: "ğŸ®"
---

æ˜¨å¤©åˆšæ›´æ–°å®Œåšå®¢, ä»Šå¤©å°±é‡åˆ°äº†ã€Œå…è´¹æµ‹è¯•åŸŸåã€è¢«å›æ”¶â™»ï¸.

è™½ç„¶å‰å‡ å¤©çœ‹åˆ°è¿‡ [/t/494056](https://www.v2ex.com/t/494056) ä»–ä»¬è®¨è®º[ä¸ƒç‰›æµ‹è¯•åŸŸåä½¿ç”¨è§„èŒƒ](https://developer.qiniu.com/fusion/kb/1319/test-domain-access-restriction-rules), ä½†æ˜¯å½“æ—¶æ²¡å½±å“åˆ°è‡ªå·±å°±æ²¡æœ‰æ·±ç©¶, åŠ ä¹‹å‰å‡ å¤©æ”¶åˆ°æµ‹è¯•åŸŸåè¢«å›æ”¶çš„é‚®ä»¶è­¦å‘Š, å‘ç°è‡ªå·±åŸŸåæ²¡æœ‰è¢«å›æ”¶, æ²¡ä»¥ä¸ºæ˜¯å’Œæˆ‘ç›¸å…³çš„äº‹, æ€€ç€ä¾¥å¹¸å¿ƒç†ä»¥ä¸ºè‡ªå·±çš„åŸŸåæ²¡æœ‰è¢«å›æ”¶, ç»“æœä»Šå¤©çœŸä¸èƒ½ç”¨äº†æ‰å»çœ‹é‚®ä»¶, ä¹‹å‰æ˜¯**è¿˜å‰©7ä¸ªè‡ªç„¶æ—¥ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å›æ”¶**, ä»Šå¤©æ˜¯**å·²è¢«ç³»ç»Ÿè‡ªåŠ¨å›æ”¶**, WTF?

### è¢«å›æ”¶çš„åŸŸåè‚¯å®šæ˜¯æ‰¾ä¸å›æ¥äº†

éšæœºçš„æµ‹è¯•åŸŸåè¢«éæ³•ä½¿ç”¨ï¼Œå‡ºç°ç›‘ç®¡é—®é¢˜ï¼Œæ‰€ä»¥ä¸ƒç‰›è¦å›æ”¶ä¹‹å‰ä¸€ç›´å…¬å¼€çš„æµ‹è¯•åŸŸå.

å¤§å¤šæ•°ç”¨æˆ·åº”è¯¥ä¸ä¼šä»¥ä¸ºè¿™æ˜¯ä¸ªæµ‹è¯•çš„åŸŸå, åº”è¯¥è¿˜ä¼šæœ‰å•†ä¸šçš„ä½¿ç”¨(çŒœæµ‹), æ‰€ä»¥ä¸ƒç‰›è¿™æ³¢æ“ä½œçœŸçš„æŒºè®©ç”¨æˆ·å¿ƒç°çš„, å› ä¸ºæœ‰å¾ˆå¤šç”¨æˆ·ä¸äº†è§£è¿™ä¸ªåŸå› .


### è§£å†³æ–¹æ¡ˆ

##### ç»‘å®šè‡ªå·±çš„åŸŸå

ä¸ƒç‰›æ¯”è¾ƒdtçš„åœ°æ–¹æ˜¯å¿…é¡»ç»‘å®šå¤‡æ¡ˆè¿‡çš„åŸŸå. è´­ä¹°åŸŸåç®€å•, å¤‡æ¡ˆå¯å¤æ‚äº†.

##### è¿ç§»å‡ºä¸ƒç‰›

å›¾åºŠé€‰ä¸ƒç‰›å…¶å®æŒºä¸æ˜æ™ºçš„, é‚£ä¹ˆåŸŸåä¸¢å¤±äº†, èµ„æºå´æ²¡ä¸¢, é‚£åªèƒ½ç»‘å®šè‡ªå·±çš„åŸŸåæ¥æ‰¾å›èµ„æºå—?
ç­”æ¡ˆæ˜¯: **ä¸éœ€è¦**. å¯ä»¥æ–°å»ºä¸€ä¸ª `bucket`, é€šè¿‡ `qshell` å°†èµ„æºè½¬ç§»åˆ°æ–° `bucket`.(è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ƒç‰›å®¢æœå‘Šè¯‰æˆ‘çš„)


### ä½¿ç”¨ [qshell](https://github.com/qiniu/qshell) è½¬ç§»bucketæ–‡ä»¶åˆ°å¦ä¸€bucket

1. ä¸‹è½½ [qshell](http://devtools.qiniu.com/qshell-v2.2.0.zip)
2. è§£å‹, å°† `qshell-darwin-x64` æ”¾åˆ° `/usr/local/bin` æˆ– `~/bin` ä¸‹
3. æ›´å `qshell-darwin-x64` ä¸º `qshell`
4. æ·»åŠ è´¦å·: `qshell account ak sk`
5. å¯¼å‡º A bucket æ–‡ä»¶ä¿¡æ¯: `qshell listbucket A A.list.txt`
6. æ ¼å¼åŒ–æ–‡ä»¶ä¿¡æ¯: `awk '{print $1}' A.list.txt > list.txt`
7. è½¬ç§»åˆ° B bucket: `qshell batchcopy A B list.txt`

A.list.txt

<img src="https://ws4.sinaimg.cn/large/006tNbRwly1fw2avx0dapj313812k7wh.jpg" width="500"/>

list.txt

<img src="https://ws4.sinaimg.cn/large/006tNbRwly1fw2awuwmvuj30ku0jgdm7.jpg" width="500"/>

### åšå®¢æ–‡ç« å›¾ç‰‡åŸŸåæ›¿æ¢

åšå®¢çš„ä¸ƒç‰›èµ„æºæ¯”è¾ƒå¥½æ‰¾, éƒ½æ˜¯åœ¨ `_posts` è·¯å¾„ä¸‹çš„ `markdown` æ–‡ä»¶é‡Œ, æ‰€ä»¥åªéœ€è¦ä¸€è¡Œä»£ç :

```bash
$ gsed -i "s/o7bkcj7d7/p9qv3iwy5/g" *.md
```

å¯æ˜¯ä¹Ÿä¼šæœ‰å¾ˆå¤šä¸æ˜¯åšå®¢ä¸Šä½¿ç”¨çš„ä¸ƒç‰›é“¾æ¥, é‚£åº”è¯¥æ€ä¹ˆå¤„ç†å‘¢? 

æ²¡åŠæ³•, åªèƒ½æ‰‹åŠ¨è¿ç§», è¿ç§»é‡è¦çš„, æ”¾å¼ƒä¸é‡è¦çš„.

- ç®€ä¹¦æ–‡ç« 
- `github` ä¸Šæ¯”è¾ƒé‡è¦çš„é¡¹ç›®çš„ `README.md`

é™¤äº†ä¸Šè¿°ä»£ç æ–¹æ³•è¿ç§»å›¾åºŠ, ç¾¤ä¸»Jasonå¼€å‘è¿‡ä¸€ä¸ªä¸é”™çš„å·¥å…·: [iPic Moverï¼šä¸€é”®æ¬å®¶ Markdown å›¾ç‰‡è‡³æ–°å›¾åºŠ](https://www.waerfa.com/ipic-mover-review), æ¨èä½¿ç”¨.


### åç»­

åº”è¯¥ä¸ä¼šè´­ä¹°åŸŸå+å¤‡æ¡ˆç»™ä¸ƒç‰›ç”¨, æ‰€ä»¥è¿˜ä¼šç»§ç»­è°ƒç ”åˆ°åº•é€‰ç”¨ç™¾åº¦/è…¾è®¯/é˜¿é‡Œè¿˜æ˜¯gitlabç­‰.

æ·±åˆ»é¢†ä¼šäº†: **å…è´¹çš„æ°¸è¿œæ˜¯æœ€è´µçš„**.

##### ä¸‹è½½ä¸ƒç‰›bucketæ‰€æœ‰èµ„æº:

```bash
$ qshell qdownload 10 qdisk_down.conf
```

qdisk_down.conf:

```bash
{
    "dest_dir"   :   "/Users/FaiChou/Downloads/backup",
    "bucket"     :   "***",
    "cdn_domain" :   "",
    "referer"    :   "http://faichou.com",
    "log_file"   :   "download.log",
    "log_level"  :   "info",
    "log_rotate" :   1,
    "log_stdout" :   false
}
```

download.log:

<img src="https://raw.githubusercontent.com/FaiChou/faichou.github.io/master/img/1541830539915.png" width="550" />



